# CLAUDE.md

このファイルは、このリポジトリで作業する際にClaude Code (claude.ai/code) に指針を提供します。

## Claudeへの指示（日本語応答設定）

- すべての応答を日本語で出力してください。

## 開発ガイドライン

### コード品質
- NEVER assume that a given library is available, even if it is well known
- When creating new components, follow existing patterns and conventions
- Always follow security best practices
- DO NOT ADD COMMENTS unless asked

### アーキテクチャ原則

#### 関心の分離（UI/ロジック分離）
- **UIコンポーネント**: 表示ロジックのみに専念
- **カスタムフック**: ビジネスロジックと状態管理を担当
- **サービス層**: API通信やデータ処理を分離
- **型定義**: ビジネスロジックに関わる型は独立して定義

#### 制御フロー
- **早期リターン**: if文でのネストを避け、条件不一致時は早期リターンを実行
- **ガード句の活用**: 異常系や前提条件チェックは関数の最初で処理
- **三項演算子の制限**: 複雑な条件分岐は避け、可読性を優先

#### 機能分離設計（重要）
- **プロセッサー・チェーン機能の禁止**: APIプロセッサー、ミドルウェアチェーン、機能のバンドル化は使用しないでください
- **独立機能ファイル**: 各機能は完全に独立したファイルとして作成し、直接インポートして使用してください
- **個別関数呼び出し**: 機能をまとめて処理するチェーンやラッパーではなく、必要な機能を個別に呼び出してください
- **推奨パターン**: 
  - ❌ `processApiRequest(processors)` のような処理チェーン
  - ✅ `checkRateLimit()`, `validateInput()`, `logRequest()` の個別呼び出し

### コーディング規約
- **文字列リテラル**: 文字列をコードに記述する際は、シングルクォート（'）ではなく**ダブルクォート（"）**を使用してください
- **条件分岐**: ネストが深くならないよう早期リターンを実施

### 重要な注意事項
- **仕様変更や新機能の追加時は、必ず `docs/` の該当する仕様書を更新してください**
- コミット前に関連ドキュメントの更新も含めてください
- 大きな変更の場合は複数の仕様書ファイルの更新が必要な場合があります

### ドキュメント作成・更新ガイドライン
- **コードサンプルを含めない**: `docs/` ディレクトリの仕様書にはTypeScript、JavaScript、SQL、JSON等のコードサンプルを記載しないでください
- **日本語説明で記述**: 技術的な内容は日本語の説明文で記載し、具体的なコード例は避けてください
- **mermaid図の使用可**: アーキテクチャ図やシーケンス図などのmermaid記法は使用可能です
- **簡潔で明確な文書**: 可読性を重視し、構造化された日本語ドキュメントを作成してください